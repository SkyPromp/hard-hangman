<html>
  <head>
    <title>Galgje</title>
  </head>
  <body>

    <script>

          let mistakes = 0;
          let guesses = ""
          let pattern = ""

          let new_data = {}

      // generate table
      let table = document.createElement("TABLE");

      // generate all the buttons
      for(let letter=65;letter<91;letter++) {
        let btn = document.createElement("button");

        btn.innerHTML = String.fromCharCode(letter);
        btn.onclick = function () {














          // testing fetch




          fetch(`cgi-bin/game.cgi?guesses=${guesses}&pattern=${pattern}&mistakes=${mistakes}&letter=${btn.textContent}`)
            .then(antwoord => antwoord.json()) // convert respons to json
            .then(data => {
                            mistakes = data["mistakes"];
                            guesses = data["guesses"];
                            pattern = data["pattern"];

            });
          let image = document.createElement("IMG");
          image.src = `afbeeldingen/galgje${mistakes}.png`;
          image.align = "center";
          document.body.appendChild(image);

          let pattern_view = document.createElement("p");
          pattern_view.innerHTML = pattern
          pattern_view.align = "center";
          document.body.appendChild(pattern_view);
          pattern.replaceAll("_", ".");

          // end testing fetch




          btn.disabled = true; // disable the button



















        };
        table.appendChild(btn)
        let space = document.createElement("span");
        space.innerHTML = " ";
        table.appendChild(space);


        //document.body.appendChild(btn); // send button to the body
        if (letter === 75 || letter === 86){
          table.align = "center";
          document.body.appendChild(table);
          table = document.createElement("TABLE");
          document.body.appendChild(document.createElement("br"));
        }

    }
      table.align = "center";
    document.body.appendChild(table);
    </script>

  </body>
</html>


